<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <!-- articles/index.html -->
    <h1>Articles</h1>
    {% if request.user.is_authenticated %}
      <h3>Hello, {{ user.username }}</h3>
      <a href="{% url 'articles:create' %}">NEW</a>
      <form action="{% url 'accounts:logout' %}" method="POST">
        {% csrf_token %}
        <input type="submit" value="Logout" />
      </form>
      <form action="{% url 'accounts:delete' %}" method="POST">
        {% csrf_token %}
        <input type="submit" value="íšŒì›íƒˆí‡´" />
      </form>
      <a href="{% url 'accounts:update' %}">íšŒì›ì •ë³´ ìˆ˜ì •</a>
    {% else %}
      <a href="{% url 'accounts:login' %}">Login</a>
      <a href="{% url 'accounts:signup' %}">Signup</a>
    {% endif %}

    <hr />

    {% for article in articles %}
      <p>ì‘ì„±ì : {{ article.user }}</p>
      <p>ê¸€ ë²ˆí˜¸: {{ article.pk }}</p>
      <a href="{% url 'articles:detail' article.pk %}"><p>ê¸€ ì œëª©: {{ article.title }}</p></a>
      <p>ê¸€ ë‚´ìš©: {{ article.content }}</p>
      {% if request.user != article.user %}
        <form action="{% url 'articles:likes' article.pk %}" method="POST">
          {% csrf_token %}
          {% if request.user in article.like_users.all %}
            <button type="submit">â¤ï¸ ì¢‹ì•„ìš” ì·¨ì†Œ</button>
          {% else %}
            <button type="submit">ğŸ¤ ì¢‹ì•„ìš”</button>
          {% endif %}
          <span>{{ article.like_users.count }}ëª…ì´ ì¢‹ì•„í•©ë‹ˆë‹¤</span>
        </form>
      {% else %}
        <span>{{ article.like_users.count }}ëª…ì´ ì¢‹ì•„í•©ë‹ˆë‹¤</span>
      {% endif %}
      <hr />
    {% endfor %}
  </body>
</html>
